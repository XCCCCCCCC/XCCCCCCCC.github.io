# 同源策略以及跨域问题

## 跨域问题及解决方案

### 同源策略及跨域问题

**同源策略**是一套浏览器的**安全机制**，当一个**源**的文档和脚本，与另一个**源**的资源进行通信时，同源策略就会对这个通信做出不同程度的限制。

简单来说，同源策略对同源资源**放行**，对异源资源**限制**。
因此限制造成的开发问题，称之为**跨域问题**。

### 同源和异源

源（origin）= 协议 + 域名 + 端口

### 跨域出现的场景
* 网络通信，a元素的跳转；加载css、js；ajax等
* JS API，window.open、window.parent、iframe等
* 存储，WebStorage、IndexDB等

### 网络中的跨域

请求页面的源称之为**页面源**，

### 浏览器如何限制异源请求

浏览器处于多方面的考量，制定了非常繁杂的规则来限制各种跨域请求，但总体的原则非常简单：

* 对标签发出的跨域请求轻微限制
* 对AJAX发出跨域请求**严厉限制**

## 解决方案

### CORS

CORS（Cross-Origin Resource Share）

基本理念
* 只要服务器明确表示允许，则校验规则

#### 请求分类

CORS将请求分为两类：==简单请求==和==预检请求==。