# 浏览器的通信能力

## 用户代理（User Agent）
浏览器可以代替用户完成http请求，代替用户解析响应结果，所以我们称之为
**用户代理（user agent）**

在网络层面，对于前端开发者，必须要知道浏览器拥有的两大核心能力
* 自动发出请求的能力
* 自动解析响应的能力

### 自动发出请求的能力
常见的包括：
1. 用户在地址栏输入一个地址，并按下了回车（**GET**请求）
2. 点击**a**元素（**GET**请求）
3. 当用户点击了提交按钮`<button type="submit">...</button>` 浏览器会获取按钮所在`<form></form>`元素，拿到它的**action**属性地址，同时拿到它的**method**属性值，然后把表单中的数据组织到请求中来，发出指定方法的请求，同时抛弃当前页面。
4. 当解析HTML时遇到了`<link><img><script><video>`等元素
5. 当用户点击了刷新

## GET和POST请求有什么区别？
浏览器约定：
**当发送GET请求时，浏览器不会附带请求体**
1. 浏览器在发送GET请求时，不会附带请求体
2. GET请求的传递信息量有限，适合传递少量数据；POST请求的传递信息量是没有限制的，适合传输大量数据
3. GET请求只能传递ASCII数据，遇到非ASCII数据需要进行编码；POST请求没有限制
4. 大部分GET请求传递的数据都附带在PATH参数中，能够通过分享地址完整的重现页面，但同时也暴露了数据，不适合敏感数据传递。
5. POST请求不会被保存在浏览器的历史记录中
6. 刷新页面时，如果当前页面时通过POST请求得到的，则浏览器会提示用户是否重新提交。若是GET请求得到的页面则没有提示

### 自动解析响应的能力
常见的：
1. 识别响应码
浏览器能够自动识别响应码，当出现一些特殊的响应码时浏览器会自动完成处理，比如**301、302**
2. 根据响应结果做不同的处理
浏览器会自动分析响应头中的**Content-Type**，根据不同的值进行不同处理，如下：
* text/plain：普通的纯文本，浏览器通常会将响应体原封不动的显示到页面上
* text/html：html文档，浏览器通常会将响应体作为页面渲染
* text/javascripy或application/javascript：js代码，浏览器通常会使用JS执行引擎将它进行解析
* text/css：css代码，浏览器将它视为样式
* image/jpeg：浏览器将它视为jpg图片
* application/octet-stream：二进制数据，会触发浏览器下载功能
* attachment：附件，会触发下载功能（content-disposition）

### 基本流程

## AJAX

浏览器本身就具备网络通信的能力，但在早起，浏览器并没有把这个能力开放给JS。

最早是微软在IE浏览器中把这一能力向JS开放，让JS可以在代码中实现发送请求，并不会刷新页面，这项技术在2005年正式被命名为**AJAX（Asynchronous Javascript And Xml）**

**AJAX**就是指在web应用程序中异步向服务器发送请求。

它的实现方式有两种，`XMLHttpRequest`和`Fetch`